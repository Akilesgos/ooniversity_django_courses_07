{% extends 'base.html' %}
{% load static %}


{% block title %}Student list{% endblock %}


{% block nav_baractive_students %}active{% endblock %}


{% block content %}
    <div class="starter-template">
        <h1 class="bold reddish"><b>Студенты курса RacBursa</b></h1>
        {% if messages %}
        <div class="alert alert-success" role="alert">
            <ul class="messages ">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}            
        <p>Ниже представлен список студентов</p>
        <a class="btn btn-primary" href="{% url 'students:add' %}" role="button">Добавить нового студента</a>
        <div class="container">
            <br /><div class="row">
                <div class="col border">#</div>
                <div class="col border">Фамилия Имя</div>
                <div class="col border">Адрес</div>
                <div class="col border">Skype</div>
                <div class="col border">Курсы</div>
                <div class="col border">Изменить</div>
                <div class="col border">Удалить</div>
            </div>
            {% for qs_stud in object_list %}
            <div class="row">
                <div class="col border">{{ qs_stud.id }}</div>
                <div class="col border"><a href="{% url 'students:detail' qs_stud.id %}">{{ qs_stud.surname }} {{ qs_stud.name }}</a></div>
                <div class="col border">{{ qs_stud.address }}</div>
                <div class="col border">{{ qs_stud.skype }}</div>
                <div class="col border">
                    {% for course_stud in qs_stud.courses.all %}
                        <a href="{% url 'courses:detail' course_stud.id %}">{{ course_stud.name }}<br /></a>
                    {% endfor %}
                </div>
                <div class="col border"><a class="btn btn-primary" href="{% url 'students:edit' qs_stud.id %}" role="button">Изменить</a></div>
                <div class="col border"><a class="btn btn-primary" href="{% url 'students:remove' qs_stud.id %}" role="button">Удалить</a></div>
            </div>
            {% endfor %}
            {% if is_paginated %}
            <br /><div class="pagination">
                <span class="step-links">
                    {% if page_obj.has_previous %}
                        {% if course_id %}
                        <a href="?course_id={{ course_id }}&page={{ page_obj.previous_page_number }}"><< previous</a>
                        {% else %}
                        <a href="?page={{ page_obj.previous_page_number }}"><< previous</a>
                        {% endif %}
                    {% endif %}
                    
                    <span class="current">
                        page {{ page_obj.number }} of {{ paginator.num_pages }}
                    </span>

                    {% if page_obj.has_next %}
                        {% if course_id %}
                        <a href="?course_id={{course_id }}&page={{ page_obj.next_page_number }}">next >></a>
                        {% else %}
                        <a href="?page={{ page_obj.next_page_number }}">next >></a>
                        {% endif %}
                    {% endif %}
                </span>
            </div>
            {% endif %}  
        </div>
    </div>
{% endblock %}
