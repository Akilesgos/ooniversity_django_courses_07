{% extends 'base.html' %}
{% load static %}
{% block title %}Students{% endblock title %} 
{% block content %}

{% for message in messages %}
    <p class="message bg-info">{{ message }}</p>
{% endfor %}

<h1>Студенты PyBursa</h1>
<p>Список студентов</p>

<div class="table-responsive">

    <a class="btn btn-primary btn-flat" href="{% url 'students:add' %}">Добавить нового студента</a>

	<table class="table">
		<thead>
			<tr>
				<th>No</th>
				<th>Фамилия/Имя</th>
				<th>Адрес</th>
				<th>Skype</th>
				<th>Курсы</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{% if not student_list %}
			<tr>
				<td colspan="5">Нет ни одного студента на курсе</td>
			</tr>
			{% else %} 
				{% for student in student_list %}
				<tr>
					<td>{{ forloop.counter }}</td>
					<td><a href="{% url 'students:detail' student.id %}"
						title="{{ student.surname }} {{ student.name }}">{{	student.surname }} {{ student.name }}</a></td>
					<td>{{ student.address }}</td>
					<td>{{ student.skype }}</td>
					<td>
					   {% include 'include/courses_include.html' with courses=student.courses.all %}
					</td>
					<td>
					   <a href="{% url 'students:update' student.id %}"><span class="glyphicon glyphicon-pencil"></span></a>
					   <a href="{% url 'students:delete' student.id %}"><span class="glyphicon glyphicon-remove"></span></a>
					</td>
				</tr>
				{% endfor %} 
			{% endif %}
		</tbody>
	</table>
	
	<div class="pagination">
	    <span class="step-links">
	        {% if page_obj.has_previous %}
	            <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.course_id %}&course_id={{ request.GET.course_id }}{% endif %}">previous</a>
	        {% endif %}
	
	        <span class="current">
	            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
	        </span>
	
	        {% if page_obj.has_next %}
	            <a href="?page={{ page_obj.next_page_number }}{% if request.GET.course_id %}&course_id={{ request.GET.course_id }}{% endif %}">next</a>
	        {% endif %}
	    </span>
	</div>
</div>
{% endblock content %}