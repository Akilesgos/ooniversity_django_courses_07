{% extends 'base.html' %}


{% load static %}


{% block title %}Список студентов курсов{% endblock title %}

{% block nav_students_active %} active{% endblock nav_students_active %}

{% block content %}
    <div class="container">
      <div class="row">
        <div class="col-sm-12 blog-main">
			<br>
			{% if messages %}
				<ul class="messages">
					{% for message in messages %}
					<li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
					{% endfor %}
				</ul>
				{% endif %}
			<a href="{% url 'students:add' %}" class="btn btn-success">Добавить нового студента</a>
			<h1>Students of ItBursa course</h1>
			<p>Here is list of students of ItBursa 2017</p>


			<table class="table table-hover"> 
				<thead> 
					<tr> 
						<th>#</th>
						<th>фамилия имя</th>
						<th>адресс</th>
						<th>skype</th>
						<th>курсы</th>
						<th></th>
					</tr> 
				</thead> 
				<tbody>
					{% for item in object_list %}
					<tr>
						<td>{{ item.id }}</td>
						<td><a href="{% url 'students:detail' item.id %}">{{ item.surname }} {{ item.name }}</a></td>
						<td>{{ item.address }}</td>
						<td>{{ item.skype }}</td>
						<td>{% for i in item.courses.all %}<a href="{% url 'courses:detail' i.id %}">{{ i.name }}</a>
                            <br>{% endfor %}</td>
						<td>
						  <a href="{% url 'students:edit' item.id %}" class="btn btn-info">Изменить</a>
							<a href="{% url 'students:remove' item.id %}" class="btn btn-info">Удалить</a>
						</td>
					</tr>
					{% endfor %}


				</tbody> 
			</table>
			{% if is_paginated %}
			<div class="pagination">
				  <ul class="pagination">

						{% if page_obj.has_previous %}<li>
							<a href="?{% if request.GET.course_id != None %}course_id={{ request.GET.course_id }}&{% endif%}page={{ page_obj.previous_page_number }}" aria-label="Previous">
							<< previous</a>
							</li>{% endif %}

						{% for page in page_obj.paginator.page_range %}
							{% if page == page_obj.number %}
							<li class="active"><a>{{ page }}</a></li>
							{% else %}
							<li><a href="?{% if request.GET.course_id != None %}course_id={{ request.GET.course_id }}&{% endif%}page={{ page }}">{{ page }}</a></li>
							{% endif %}
						{% endfor %}

						{% if page_obj.has_next %}<li>
							<a href="?{% if request.GET.course_id != None %}course_id={{ request.GET.course_id }}&{% endif%}page={{ page_obj.next_page_number }}" aria-label="Next">
							next >></a>
							</li>{% endif %}

					</li>
				</ul>
			</div>
			{% endif %}
			{% include 'include/come_include.html' %}

        </div><!-- /.page-main -->
      </div><!-- /.row -->
    </div><!-- /.container -->
{% endblock content %}
