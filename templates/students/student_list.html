{% extends "base.html" %}


{% block title %}Студенты курса ItBursa Django{% endblock title %}


{% block nav_class_students %} class="active"{% endblock %}


{% block content %}
    <div class="container main_text">

        {% if messages %}
        <div class="alert alert-info">
          <ul class="messages">
              {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
              {% endfor %}
          </ul>
        </div>
        {% endif %}

        <div class="program">
          <h2>Список студентов</h2>
          <table class="table table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th>фамилия имя</th>
                <th>адрес</th>
                <th>skype</th>
                <th>курсы</th>
              </tr>
            </thead>
            <tbody>
              {% for student in student_list %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>
                    <a href="{% url 'students:detail' student.id %}">{{ student.fullname }}</a>
                </td>
                <td>{{ student.address }}</td>
                <td>{{ student.skype }}</td>
                <td>
                  {% for student_courses in student.get_courses %}  <!-- in student.courses.all -->
                    <p><a href="{% url 'courses:detail' student_courses.id %}">{{ student_courses.name }}</a></p>
                  {% endfor %}
                    <a href="{% url 'students:edit' student.id %}">
                      <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                    </a>
                    <a href="{% url 'students:remove' student.id %}">
                      <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        {% if is_paginated %}
          <div class="pagination">
            <ul class="pagination pagination-sm">
              {% if page_obj.has_previous %}
                <li>
                  <a href="?{% if request.GET.course_id %}course_id={{ request.GET.course_id }}&{% endif %}page={{ page_obj.previous_page_number }}">&lt;&lt; previous</a>
                </li>
              {% endif %}

              {% for page_num in page_obj.paginator.page_range %}
                <li {% if page_num == page_obj.number %} class="active"{% endif %}><a href="?{% if request.GET.course_id %}course_id={{ request.GET.course_id }}&{% endif %}page={{ page_num }}">{{ page_num }}</a></li>
              {% endfor %}

              {% if page_obj.has_next %}
                <li>
                  <a href="?{% if request.GET.course_id %}course_id={{ request.GET.course_id }}&{% endif %}page={{ page_obj.next_page_number }}">next &gt;&gt;</a>
                </li>
              {% endif %}
            </ul>
          </div>
        {% endif %}

        <p><a href="{% url 'students:add' %}" class="btn btn-info" role="button">Добавить студента</a></p>

    </div>
{% endblock content %}
